CREATE USER 'debezium'@'%' IDENTIFIED WITH mysql_native_password BY 'dbz';
CREATE USER 'replicator'@'%' IDENTIFIED BY 'replpass';

GRANT SELECT, RELOAD, SHOW DATABASES, REPLICATION SLAVE, REPLICATION CLIENT  ON *.* TO 'debezium';
GRANT REPLICATION SLAVE, REPLICATION CLIENT ON *.* TO 'replicator';

CREATE DATABASE demo;
GRANT ALL PRIVILEGES ON demo.* TO 'mysqluser'@'%';

use demo;

CREATE TABLE USERS (USERID VARCHAR(255), 
                    EMAIL  VARCHAR(255), 
                    SHARE_LOCATION_OPTIN BOOLEAN,
                    PRIVACY_LOCATION_LAT DOUBLE,
                    PRIVACY_LOCATION_LON DOUBLE,
                    PRIVACY_ZONE_KM DOUBLE,
                    CREATE_TS TIMESTAMP DEFAULT CURRENT_TIMESTAMP ,
                    UPDATE_TS TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

INSERT INTO USERS (USERID, EMAIL, SHARE_LOCATION_OPTIN, PRIVACY_LOCATION_LAT, PRIVACY_LOCATION_LON, PRIVACY_ZONE_KM) 
           VALUES ('rmoff','robin@rmoff.net', TRUE, 53.924729, -1.804453, 0.5);

INSERT INTO USERS (USERID, EMAIL, SHARE_LOCATION_OPTIN) 
           VALUES ('hugh','hugh@example.com', FALSE);

INSERT INTO USERS (USERID, EMAIL, SHARE_LOCATION_OPTIN) 
           VALUES ('ivor','ivor@example.com', FALSE);
